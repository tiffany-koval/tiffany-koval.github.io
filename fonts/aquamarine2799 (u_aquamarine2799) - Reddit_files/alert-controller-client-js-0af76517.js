import{a as e,_ as t,t as s,e as r,n as i,b as n,k as a,W as o,w as l,l as c,g as d,dp as p}from"./shell-091aa980.js";import{s as h,x as m,am as u,A as b,M as v,i as g,ak as f,I as w,a2 as C}from"./icon-bd54b9fa.js";import{A as x}from"./alerts-controller-6edb4dff.js";import{r as y,F as T}from"./render-toast-4175cdf5.js";import{F as k}from"./faceplate-banner-fbf0d896.js";import{T as _}from"./TinyGesture-6f7cc1aa.js";let B=class extends h{constructor(){super(...arguments),this.isVisible=!1,this.alertMessage="",this.isDevelopment=!1,this.openBanner=e=>{const t=e;this.alert=t.detail;const s="Server error. Try again later.",r=this.alert?.content??this.alert?.message??s,i=`Multiple errors occured, including: ${r}`;this.isVisible?this.alertMessage=this.isDevelopment?i:s:(this.alertMessage=r,this.isVisible=!0)},this.closeBanner=()=>{this.isVisible=!1}}connectedCallback(){super.connectedCallback(),this.addEventListener("show-banner",this.openBanner)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("show-banner",this.openBanner)}render(){return m`${this.isVisible?m`<faceplate-banner class="z-[5] pointer-events-auto w-full rounded-none l:rounded-[0.75rem] xl:rounded-[0.75rem] overflow-hidden l:mt-md l:mx-auto l:max-w-[1352px] xl:max-w-[1524px]" appearance="error" shape="square" msg="${this.alertMessage}" aria-live="polite" dismissible><div slot="leadingIcon">${u()}</div> <span slot="closeButton"> ${k.getCloseButton("error",{"aria-label":"close error button",onclick:this.closeBanner})} </span> </faceplate-banner>`:b}<slot></slot>`}};B.styles=[e],t([s()],B.prototype,"isVisible",void 0),t([s()],B.prototype,"alertMessage",void 0),B=t([r("banner-controller")],B);let E=class extends h{constructor(){super(...arguments),this.ariaLive="polite",this._gesture=new _(this,{mouseSupport:!0}),this.handleToast=e=>{const t=e.detail,s={...t,meta:{...t.meta},namedContent:{...t.namedContent}},{level:r,namedContent:i}=s;i.action??(i.action=n({attributes:{onclick:()=>o.dismiss()},appearance:"plainInverted",leadingIcon:v()}));const o=y(this,s);r&&r>=a.warning&&r<=a.success&&window.setTimeout((()=>{o.dismiss()}),s.meta?.duration??4e3),this.appendChild(o)}}static get styles(){return g`:host{position:fixed}:host>slot{display:flex;flex-direction:column;gap:var(--spacer-md);align-items:center;position:fixed;left:50%;transform:translateX(-50%);padding:0 1rem;bottom:var(--rem16)}`}connectedCallback(){super.connectedCallback(),this.addEventListener("show-toast",this.handleToast),this._gesture.on("swipeleft",this._onSwipe),this._gesture.on("swiperight",this._onSwipe)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("show-toast",this.handleToast),this._gesture.destroy()}_onSwipe(e){if(e instanceof MouseEvent)return;const t=(e.target instanceof HTMLElement?e.target:null)?.closest("faceplate-toast");t instanceof T&&t.dismiss()}render(){return m`<slot></slot>`}};t([i({type:String,reflect:!0,attribute:"aria-live"})],E.prototype,"ariaLive",void 0),E=t([r("toaster-lite")],E);const L=o(h);let M=class extends L{constructor(){super(...arguments),this.ariaLive="polite",this.min=a.error,this.max=a.success,this.BATCH_TIMEOUT=100,this._alertsCtrl=new x(this,{batchWindow:this.BATCH_TIMEOUT,onAlert:e=>{const{level:t,namedContent:s={}}=e;if(t===a.error)return s.icon=f({size:w.Large}),this.trackEvent(c({source:"client",action:"record",noun:"banner_error"})),this.triggerBanner(e);t===a.warning&&(s.icon=C({size:w.Large})),this.triggerToast(e)},isOnline:()=>!0}),this.triggerToast=e=>{this.toaster?.dispatchEvent(d("show-toast",e))},this.triggerBanner=e=>{this.bannerController?.dispatchEvent(d("show-banner",e))}}connectedCallback(){super.connectedCallback(),this._alertsCtrl.options.min=this.min,this._alertsCtrl.options.max=this.max}render(){return m` <banner-controller></banner-controller> <toaster-lite></toaster-lite> `}};M.styles=[g`:host{position:fixed;width:100%}`,e],t([i({type:String,reflect:!0,attribute:"aria-live"})],M.prototype,"ariaLive",void 0),t([i({attribute:"min",converter:p})],M.prototype,"min",void 0),t([i({attribute:"max",converter:p})],M.prototype,"max",void 0),t([l("banner-controller")],M.prototype,"bannerController",void 0),t([l("toaster-lite")],M.prototype,"toaster",void 0),M=t([r("alert-controller")],M);
//# sourceMappingURL=alert-controller-client-js-0af76517.js.map

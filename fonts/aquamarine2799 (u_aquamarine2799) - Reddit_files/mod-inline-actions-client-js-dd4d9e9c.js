import"./faceplate-date-210d2b75.js";import"./faceplate-timeago-e54f2a77.js";import"./faceplate-dropdown-menu-b5e8e95c.js";import"./faceplate-menu-a7640ba3.js";import"./faceplate-shimmer-7a244724.js";import"./faceplate-tooltip-d3b1f57e.js";import"./post-mod-actions-menu-2751acfb.js";import{f as t,c9 as e,cO as i,q as o,c as s,a,_ as n,n as r,t as d,e as l,r as c}from"./shell-091aa980.js";import{x as p,c as h,I as m,M as u,cd as b,aF as v,at as f,ah as y,ay as R,C as g,ce as S,i as A,s as w,j as O,N as k,A as $}from"./icon-bd54b9fa.js";import{i as j}from"./shreddit-rpl-action-bar-update-48d46b20.js";import{a as C,i as P}from"./mod-actions-controller-30f7081f.js";import{H as x}from"./mod-actions-menu-916f1881.js";import{C as I}from"./comment-d06b644b.js";import{M as U}from"./modActions-a491b2e2.js";import{P as M}from"./post-d6ddae05.js";import{P as E}from"./postUpdate-c6c98b35.js";import{M as z,s as V,a as B,b as T,c as D,d as F,e as H}from"./mod-verdict-7f24e5ae.js";import"./shreddit-comment-share-button-e6015017.js";import"./shreddit-post-share-button-99ff0565.js";import"./locale-e49f0b05.js";import"./relative-date-77173042.js";import"./cached-intl-e5b35306.js";import"./popper-controller-bcfd7f7f.js";import"./makeEventDispatcher-28989282.js";import"./content-action-button-e82981b8.js";import"./list-item-87b32fd6.js";import"./custom-event-8a5c1c61.js";import"./add-removal-reason-modal-fea0c2df.js";import"./utils-147dae00.js";import"./modActions-bc532ef2.js";import"./keyed-e9fbf9cf.js";import"./faceplate-form-f1f165e1.js";import"./form-common-utils-52bc3cfc.js";import"./post-0ac2732b.js";import"./faceplate-input-1d78f8a0.js";import"./input-element-422d9934.js";import"./rpl-tooltip-b3d8c47e.js";import"./contains-1042b204.js";import"./interaction-controller-daa20b2e.js";import"./dropdownButton-37fa9de7.js";import"./faceplate-modal-0f0c31b7.js";import"./faceplate-textarea-input-1ec3aa59.js";import"./live-30a71da3.js";import"./text-input-30412a36.js";import"./remove-highlighted-post-6d1119c9.js";import"./utils-9210808e.js";import"./pdp-a697afbf.js";import"./throttle-cde4a556.js";import"./click-card-f44c5dfc.js";import"./faceplate-hovercard-70c17f5b.js";import"./post-guidance-feedback-a35527a9.js";import"./faceplate-bottom-sheet-eb6763cf.js";import"./TinyGesture-6f7cc1aa.js";import"./faceplate-bottom-sheet-header-2128e684.js";import"./with-share-b2ff4c86.js";import"./a-d374470c.js";import"./index-6b6f75e3.js";import"./comments-9758077d.js";let L=class extends(t(w)){constructor(){super(...arguments),this.feedViewType=e.ModQueueCompactView,this.viewContext=M.CommentsPage,this.itemState=z.UNMODERATED,this.hasReports=!1,this.isModMode=!1,this.isRemoved=!1,this.isDeleted=!1,this.isLocked=!1,this.isStickied=!1,this.isHighlighted=!1,this.isCurrentUserAuthor=!1,this.hasParent=!1,this.isIconOnly=!1,this.hasRemovalReason=!1,this.permalink="",this.isDesktopViewport=!1,this.isSpamFilteredPost=!1,this.isProfilePost=!1,this.isPromotedPost=!1,this.hasFlairPermissions=!1,this.areHighlightsEnabled=!1,this.hideInlineActions=!1,this.moderationState=z.UNMODERATED,this._handleThingUpdate=t=>{let e="";if("awardOnContentId"in t?e=t.awardOnContentId:"commentId"in t?e=t.commentId:"postId"in t&&(e=t.postId),e!==this.thingId)return;const{value:i}=t;switch(t.action){case E.approve:case I.approve:case C.approve:case I.approveOptimistic:this.hasRemovalReason=!1,this.isRemoved=!1,this.moderationState=z.APPROVED;break;case E.remove:case E.removeAsSpam:case E.confirmRemoval:case I.remove:case I.removeAsSpam:case I.confirmRemoval:case C.remove:case C.confirmRemoval:case I.removeOptimistic:case I.removeAsSpamOptimistic:case I.confirmRemovalOptimistic:this.isRemoved=!0,this.moderationState=z.REMOVED;break;case E.addRemovalReason:case I.addRemovalReason:this.hasRemovalReason=!0;break;case E.updateHighlightedPost:this.isHighlighted=i;break;case E.lock:case I.lock:this.isLocked=i;break;case E.delete:this.isDeleted=i;break;case E.sticky:case I.sticky:this.isStickied=i}}}get itemType(){return this.thingId?P(this.thingId):null}get isPost(){return this.itemType===i.Post}get isCompactView(){return this.feedViewType===e.CompactView}get isOnModqueuePage(){return this.viewContext===M.ModQueue||this.viewContext===M.ModQueueAll}get isApproved(){return this.moderationState===z.APPROVED}get shouldShowConfirmRemoval(){return V(this.moderationState,this.isSpamFilteredPost)}get shouldShowActionInline(){return B(this.viewContext,this.feedViewType)&&!this.isIconOnly&&!this.hideInlineActions}get isStickyable(){const t=!(this.viewContext===M.ProfileFeed||this.viewContext===M.ProfileFeed2),e=this.isCurrentUserAuthor&&!this.hasParent;return this.isPost?t:t&&e}get itemTopic(){switch(this.itemType){case i.Award:return o.AwardOnContentUpdated;case i.Comment:return o.CommentUpdated;case i.Post:return o.PostUpdated;default:return null}}connectedCallback(){super.connectedCallback(),this.moderationState=this.itemState,this.itemTopic&&this.subscribe(this.itemTopic,this._handleThingUpdate)}disconnectedCallback(){super.disconnectedCallback(),this.itemTopic&&this.unsubscribe(this.itemTopic,this._handleThingUpdate)}getApproveButtonAppearance(){const t=j()?"bordered":"secondary";return this.isCompactView?t:this.shouldShowConfirmRemoval||this.hasReports?"primary":(this.moderationState,z.REMOVED,t)}renderApproveAction(){return(this.isModMode||this.isOnModqueuePage)&&T(this.moderationState)?p` <mod-action-button aria-label="Approve content" data-mod-action="${U.ApproveContent}" button-appearance="${this.getApproveButtonAppearance()}" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center">${h({attributes:{"aria-hidden":"true"},size:m.Small})}</span> <span slot="text">Approve</span> </mod-action-button> `:null}renderRemoveAction(){return(this.isModMode||this.isOnModqueuePage)&&D(this.moderationState)?p` <mod-action-button aria-label="Remove content" data-mod-action="${U.RemoveContent}" button-appearance="${j()?"bordered":"secondary"}" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center">${u({attributes:{"aria-hidden":"true"},size:m.Small})}</span> <span slot="text"> Remove </span> </mod-action-button> `:null}renderConfirmRemovalAction(){return(this.isModMode||this.isOnModqueuePage)&&this.shouldShowConfirmRemoval?p` <mod-action-button aria-label="Confirm Removal" data-mod-action="${U.ConfirmRemoval}" button-appearance="${j()?"bordered":"secondary"}" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center">${u({attributes:{"aria-hidden":"true"},size:m.Small})}</span> <span slot="text"> Confirm Removal </span> </mod-action-button> `:null}renderSpamAction(){return F({moderationState:this.moderationState,isSpamFilteredPost:this.isSpamFilteredPost,isRemoved:this.isRemoved,isPromotedPost:this.isPromotedPost})&&this.shouldShowActionInline?p` <mod-action-button aria-label="Remove content as spam" data-mod-action="${U.RemoveContentAsSpam}" button-appearance="plain" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center">${b({attributes:{"aria-hidden":"true"},size:m.Small})}</span> <span slot="text"> Spam </span> </mod-action-button> `:null}renderFlairAction(){return this.isPost&&this.shouldShowActionInline?p` <mod-action-button aria-label="Open post flair modal" data-mod-action="${U.OpenEditPostFlairModal}" button-appearance="plain" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center">${v({attributes:{"aria-hidden":"true"},size:m.Small})}</span> <span slot="text"> Flair </span> </mod-action-button>`:null}renderAddRemovalReasonAction(){return(this.isModMode||this.isOnModqueuePage)&&this.itemType!==i.Award&&H(this.moderationState,this.hasRemovalReason,this.isSpamFilteredPost,this.isProfilePost)?p` <mod-action-button aria-label="Add removal reason" data-mod-action="${U.AddRemovalReason}" button-appearance="${j()?"bordered":"secondary"}" ?show-full-buttons="${!0}"> <span slot="icon" class="flex justify-center">${f({attributes:{"aria-hidden":"true"},size:m.Small})}</span> <span slot="text"> Add removal reason </span> </mod-action-button> ${this.isIconOnly?p`<div class="separator"></div>`:null} `:null}renderCopyLinkAction(){return this.shouldShowActionInline?this.isPost?p`<shreddit-post-share-button ?use-button="${!0}" ?is-desktop-viewport="${this.isDesktopViewport}" permalink="${this.permalink}" size="${s.Small}" ?show-full-buttons="${!this.isIconOnly}"></shreddit-post-share-button>`:p`<shreddit-comment-share-button slot="comment-share" ?use-button="${!0}" ?is-desktop-viewport="${this.isDesktopViewport}" permalink="${this.permalink}" ?show-full-buttons="${!this.isIconOnly}"></shreddit-comment-share-button>`:null}renderLockAction(){if(!this.shouldShowActionInline||this.isLocked)return null;const t="Lock";return p` <mod-action-button aria-label="${t}" data-mod-action="${U.Lock}" event-noun="lock" button-appearance="plain" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center"> ${y({attributes:{"aria-hidden":"true"},size:m.Small})} </span> <span slot="text"> ${t} </span> </mod-action-button>`}renderUnlockAction(){if(!this.shouldShowActionInline||!this.isLocked)return null;const t="Unlock";return p` <mod-action-button aria-label="${t}" data-mod-action="${U.Unlock}" event-noun="unlock" button-appearance="plain" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center"> ${R({attributes:{"aria-hidden":"true"},size:m.Small})} </span> <span slot="text"> ${t} </span> </mod-action-button>`}renderStickyAction(){if(!this.isStickyable||!this.shouldShowActionInline||this.isStickied||this.areHighlightsEnabled)return null;const t="Sticky";return p` <mod-action-button aria-label="${t}" data-mod-action="${U.Sticky}" event-noun="sticky" button-appearance="plain" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center"> ${g({attributes:{"aria-hidden":"true"},size:m.Small})} </span> <span slot="text"> ${t} </span> </mod-action-button>`}renderUnstickyAction(){if(!this.isStickyable||!this.shouldShowActionInline||!this.isStickied||this.areHighlightsEnabled)return null;const t="Unsticky";return p` <mod-action-button aria-label="${t}" data-mod-action="${U.Unsticky}" event-noun="unsticky" button-appearance="plain" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center"> ${S({attributes:{"aria-hidden":"true"},size:m.Small})} </span> <span slot="text"> ${t} </span> </mod-action-button>`}renderAddToHighlightsAction(){if(!this.isStickyable||!this.shouldShowActionInline||!this.areHighlightsEnabled||!x.has(this.viewContext)||this.isHighlighted)return null;const t="Add to highlights";return p` <mod-action-button aria-label="${t}" data-mod-action="${U.UpdateHighlightedPost}" event-noun="highlight" button-appearance="plain" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center"> ${g({attributes:{"aria-hidden":"true"},size:m.Small})} </span> <span slot="text"> ${t} </span> </mod-action-button>`}renderRemoveFromHighlightsAction(){if(!(this.isStickyable&&this.shouldShowActionInline&&this.areHighlightsEnabled&&x.has(this.viewContext)&&this.isHighlighted))return null;const t="Remove from highlights";return p` <mod-action-button aria-label="${t}" data-mod-action="${U.RemoveHighlightedPost}" event-noun="unhighlight" button-appearance="plain" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center"> ${S({attributes:{"aria-hidden":"true"},size:m.Small})} </span> <span slot="text"> ${t} </span> </mod-action-button>`}render(){return p` ${this.renderAddRemovalReasonAction()} ${this.renderApproveAction()} ${this.renderRemoveAction()} ${this.renderConfirmRemovalAction()} ${this.renderSpamAction()} ${this.renderFlairAction()} ${this.renderLockAction()} ${this.renderUnlockAction()} ${this.renderCopyLinkAction()} ${this.renderStickyAction()} ${this.renderUnstickyAction()} ${this.renderAddToHighlightsAction()} ${this.renderRemoveFromHighlightsAction()} `}};L.styles=[a,A`:host{display:flex;gap:var(--spacer-xs)}.separator{border-left:1px solid rgb(0,0,0,.1);width:1px;height:32px}`],n([r({type:String,attribute:"thing-id"})],L.prototype,"thingId",void 0),n([r({type:String,attribute:"feed-view-type"})],L.prototype,"feedViewType",void 0),n([r({type:String,attribute:"view-context"})],L.prototype,"viewContext",void 0),n([r({type:String,attribute:"item-state"})],L.prototype,"itemState",void 0),n([r({type:Boolean,attribute:"has-reports"})],L.prototype,"hasReports",void 0),n([r({type:Boolean,attribute:"mod-mode"})],L.prototype,"isModMode",void 0),n([r({type:Boolean,attribute:"removed"})],L.prototype,"isRemoved",void 0),n([r({type:Boolean,attribute:"deleted"})],L.prototype,"isDeleted",void 0),n([r({type:Boolean,attribute:"locked"})],L.prototype,"isLocked",void 0),n([r({type:Boolean,attribute:"stickied"})],L.prototype,"isStickied",void 0),n([r({type:Boolean,attribute:"highlighted"})],L.prototype,"isHighlighted",void 0),n([r({type:Boolean,attribute:"current-user-author"})],L.prototype,"isCurrentUserAuthor",void 0),n([r({type:Boolean,attribute:"has-parent"})],L.prototype,"hasParent",void 0),n([r({type:Boolean,attribute:"icon-only"})],L.prototype,"isIconOnly",void 0),n([r({type:Boolean,attribute:"has-removal-reason"})],L.prototype,"hasRemovalReason",void 0),n([r({type:String,attribute:"permalink"})],L.prototype,"permalink",void 0),n([r({type:Boolean,attribute:"is-desktop-viewport"})],L.prototype,"isDesktopViewport",void 0),n([r({type:Boolean,attribute:"is-spam-filtered-post"})],L.prototype,"isSpamFilteredPost",void 0),n([r({type:Boolean,attribute:"is-profile-post"})],L.prototype,"isProfilePost",void 0),n([r({type:Boolean,attribute:"is-promoted-post"})],L.prototype,"isPromotedPost",void 0),n([r({type:Boolean,attribute:"has-flair-permissions"})],L.prototype,"hasFlairPermissions",void 0),n([r({type:Boolean,attribute:"highlights-enabled"})],L.prototype,"areHighlightsEnabled",void 0),n([r({type:Boolean,attribute:"hide-inline-actions"})],L.prototype,"hideInlineActions",void 0),n([d()],L.prototype,"moderationState",void 0),L=n([l("shreddit-mod-inline-actions")],L);const W=t(w);let q=class extends W{constructor(){super(...arguments),this.parentOfModVerdictSlotElementWidth=0,this.removed=!1,this.thingId="",this.shouldIgnoreParentWidth=!1,this.minWidthToShowLabel=460,this.onCommentUpdateAction=t=>{if(t.commentId!==this.thingId)return;const{action:e}=t;switch(e){case I.approve:case I.approveOptimistic:this.removed=!1;break;case I.remove:case I.removeAsSpam:case I.confirmRemoval:case I.removeOptimistic:case I.removeAsSpamOptimistic:case I.confirmRemovalOptimistic:this.removed=!0}},this.onPostUpdateAction=t=>{if(t.postId!==this.thingId)return;const{action:e}=t;switch(e){case E.approve:case E.approveOptimistic:this.removed=!1;break;case E.remove:case E.removeAsSpam:case E.confirmRemoval:case E.removeOptimistic:case E.removeAsSpamOptimistic:case E.confirmRemovalOptimistic:this.removed=!0}},this.onAwardOnContentUpdateAction=t=>{if(t.awardOnContentId!==this.thingId)return;const{action:e}=t;switch(e){case C.approve:this.removed=!1;break;case C.remove:case C.confirmRemoval:this.removed=!0}}}connectedCallback(){super.connectedCallback(),this.initializeResizeObserver(),this.subscribe(o.PostUpdated,this.onPostUpdateAction),this.subscribe(o.CommentUpdated,this.onCommentUpdateAction),this.subscribe(o.AwardOnContentUpdated,this.onAwardOnContentUpdateAction)}disconnectedCallback(){this.cleanupResizeObserver(),super.disconnectedCallback(),this.unsubscribe(o.PostUpdated,this.onPostUpdateAction),this.unsubscribe(o.CommentUpdated,this.onCommentUpdateAction),this.unsubscribe(o.AwardOnContentUpdated,this.onAwardOnContentUpdateAction)}initializeResizeObserver(){this.parentOfModVerdictSlotElement=this.closest('[slot="mod-verdict"]')?.parentElement,this.parentOfModVerdictSlotElement&&(this.resizeObserver=new ResizeObserver((t=>{for(const e of t)this.parentOfModVerdictSlotElementWidth=e.contentRect.width})),this.resizeObserver.observe(this.parentOfModVerdictSlotElement))}cleanupResizeObserver(){this.resizeObserver&&this.parentOfModVerdictSlotElement&&this.resizeObserver.unobserve(this.parentOfModVerdictSlotElement)}render(){return p` <span class="inline-flex items-center gap-xs text-12 text-neutral-content w-full"> <div class="relative"> <slot name="verdict-indicator-avatar"></slot> <div aria-hidden="true" class="absolute bottom-0 -right-px flex justify-center items-center h-md w-md rounded-full border-solid border-md border-neutral-background scale-75 origin-bottom-right translate-y-px ${this.removed?"bg-red-200 text-red-700":"bg-kiwigreen-200 text-kiwigreen-700"}"> ${this.removed?k({size:m.ExtraSmall}):O({size:m.ExtraSmall})} </div> </div> ${this.shouldShowLabel?p`<slot name="verdict-indicator-label"></slot>`:""} </span> `}get shouldShowLabel(){return this.shouldIgnoreParentWidth||this.parentOfModVerdictSlotElementWidth>=this.minWidthToShowLabel}};q.styles=[a],n([d()],q.prototype,"parentOfModVerdictSlotElementWidth",void 0),n([d()],q.prototype,"parentOfModVerdictSlotElement",void 0),n([r({type:Boolean,reflect:!0})],q.prototype,"removed",void 0),n([r({type:String,attribute:"thing-id"})],q.prototype,"thingId",void 0),n([r({type:Boolean,attribute:"ignore-parent-width"})],q.prototype,"shouldIgnoreParentWidth",void 0),q=n([l("mod-verdict-indicator-component")],q);let N=class extends w{constructor(){super(...arguments),this.iconOnly=!1,this.pubsub=new c(this),this.handleCommentUpdate=({commentId:t,action:e,value:i})=>{if(t===this.thingId)switch(e){case I.addRemovalReason:this.hasRemovalReason=Boolean(i);break;case I.approve:case I.approveOptimistic:this.hasRemovalReason=!0,this.isRemoved=!1;break;case I.remove:case I.removeAsSpam:case I.removeOptimistic:case I.removeAsSpamOptimistic:case I.confirmRemovalOptimistic:this.hasRemovalReason=!1,this.isRemoved=!0}},this.handlePostUpdate=({postId:t,action:e,value:i})=>{if(t===this.thingId)switch(e){case E.addRemovalReason:this.hasRemovalReason=Boolean(i);break;case E.approve:case E.approveOptimistic:this.hasRemovalReason=!0,this.isRemoved=!1;break;case E.remove:case E.removeAsSpam:case E.removeOptimistic:case E.removeAsSpamOptimistic:case E.confirmRemovalOptimistic:this.isRemoved=!0,this.hasRemovalReason=!1}},this.updateModVerdict=t=>{const e=this.closest('[slot="mod-verdict"]');t&&this.isRemoved?e?.setAttribute("show-removal-reason-cta",""):e?.removeAttribute("show-removal-reason-cta")},this.shouldShowCta=()=>{const t=this.isRemoved?z.REMOVED:z.UNMODERATED;return H(t,!!this.hasRemovalReason,!!this.isContentSpamFilteredPost,this.isProfilePost)}}connectedCallback(){super.connectedCallback();const t=this.closest('[slot="mod-verdict"]')?.parentElement;this.resizeObserver=new ResizeObserver((t=>{for(const e of t)e.contentRect.width<500?this.iconOnly=!0:this.iconOnly=!1})),this.resizeObserver.observe(t),this.pubsub.subscribe(o.CommentUpdated,this.handleCommentUpdate),this.pubsub.subscribe(o.PostUpdated,this.handlePostUpdate),this.updateModVerdict(!this.hasRemovalReason)}disconnectedCallback(){super.disconnectedCallback();const t=this.closest('[slot="mod-verdict"]')?.parentElement;this.resizeObserver.unobserve(t),this.resizeObserver.disconnect(),this.pubsub.unsubscribe(o.CommentUpdated,this.handleCommentUpdate),this.pubsub.unsubscribe(o.PostUpdated,this.handlePostUpdate)}updated(t){super.updated(t),t.has("hasRemovalReason")&&this.updateModVerdict(!this.hasRemovalReason)}render(){return this.hasRemovalReason||!this.shouldShowCta()?$:p` <mod-action-button aria-label="Add removal reason" data-mod-action="${U.AddRemovalReason}" button-appearance="secondary" ?show-full-buttons="${!0}"> <span slot="icon" class="flex justify-center"> ${f({attributes:{"aria-hidden":"true"},size:m.Small})} </span> <span slot="text" class="flex"> ${this.iconOnly?f({attributes:{"aria-hidden":"true"},size:m.Small}):"Add removal reason"} </span> </mod-action-button> `}};N.styles=[a],n([r({type:String,attribute:"thing-id"})],N.prototype,"thingId",void 0),n([r({type:Boolean,attribute:"has-removal-reason"})],N.prototype,"hasRemovalReason",void 0),n([d()],N.prototype,"iconOnly",void 0),n([r({type:Boolean,attribute:"is-removed"})],N.prototype,"isRemoved",void 0),n([r({type:Boolean,attribute:"is-content-spam-filtered-post"})],N.prototype,"isContentSpamFilteredPost",void 0),n([r({type:Boolean,attribute:"is-profile-post"})],N.prototype,"isProfilePost",void 0),N=n([l("responsive-add-removal-reason-cta")],N);
//# sourceMappingURL=mod-inline-actions-client-js-dd4d9e9c.js.map
